(function(){"use strict";angular.module("ctLogger",[])})(),function(){var n=function(){toastr.options={positionClass:"toast-bottom-right"};var t=function(n){toastr.success(n)},i=function(n){toastr.info(n)},r=function(n){toastr.warning(n)},u=function(n){toastr.error(n)},f=!0,e="DEBUG: ",o=!0,s=function(n){return e+n},h=function(n){return f&&n!==""&&n!==null},n=function(n,t){if(h(t)){var i=s(t);o?n==="info"?console.info(i):n==="success"?console.info(i):n==="warning"?console.warn(i):n==="error"&&console.error(i):n==="info"?toastr.info(i):n==="success"?toastr.success(i):n==="warning"?toastr.warning(i):n==="error"&&toastr.error(i)}},c={info:function(t){n("info",t)},success:function(t){n("success",t)},warning:function(t){n("warning",t)},error:function(t){n("error",t)}};return{debug:c,success:t,info:i,warning:r,error:u}};angular.module("ctLogger").factory("logger",n)}(),function(){"use strict";angular.module("ctException",["ctLogger"])}(),function(){"use strict";var n=function(n){n.decorator("$exceptionHandler",["$delegate","logger",function(n,t){return function(i,r){n(i,r);t.debug.error(i.message)}}])};n.$inject=["$provide"];angular.module("ctException").config(n)}(),function(){"use strict";var n=function(n,t,i){var r=function(){var r=!1;n.$on("$stateChangeError",function(n,u){r||(r=!0,i.debug.error("Routing error: name = "+u.name),t.path("/"))})};return{start:r}};n.$inject=["$rootScope","$location","logger"];angular.module("ctException").factory("routeErrorHandler",n)}(),function(){"use strict";angular.module("ctAuthentication",["auth0","angular-storage","angular-jwt"])}(),function(){"use strict";var n=function(n,t,i,r,u){var s="dbProfile",e="profile",f="token",o="refreshToken",c=function(t){return n.set(f,t)},l=function(t){return n.set(s,t)},a=function(){return t},v=function(){return n.get(s)},h=function(){return n.get(e)},y=function(){return n.get(f)},p=function(){return n.get(o)},w=function(n){return i.isTokenExpired(n)},b=function(){var i=r.defer();return t.signin({authParams:{scope:"openid offline_access"}},function(r,u,s,h,c){n.set(e,r);n.set(f,u);n.set(o,c);var l={profile:r,auth:t};i.resolve(l)},function(n){i.reject(n)}),i.promise},k=function(){t.signout();n.remove(e);n.remove(s);n.remove(f);n.remove(o);n.remove("myUserProfile")},d=function(n){if(t.isAuthenticated===!1){u.debug.info("triggered ctUser.authenticate");var i=h();t.authenticate(i,n)}},g=function(n,i){return u.debug.info("triggered ctUser.refreshAndAuthenticate"),n===null&&(n=t.refreshIdToken(i).then(function(n){c(n);var i=h();t.authenticate(i,n)}).finally(function(){n=null})),n},nt=function(){n.set(e,{name:"Test User",user_id:"google-oauth2|114343767643441344703"});n.set(f,"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2NvZGV0ZWN1aWNvLmF1dGgwLmNvbS8iLCJzdWIiOiJnb29nbGUtb2F1dGgyfDExNDM0Mzc2NzY0MzQ0MTM0NDcwMyIsImF1ZCI6IlpVQ09ZTndtUlJpSmlvcVVDS2RvQnRUSTIxdmdGbVpwIiwiZXhwIjoxNDkxNTcwMTE5LCJpYXQiOjE0OTE1MzQxMTksImF6cCI6IlpVQ09ZTndtUlJpSmlvcVVDS2RvQnRUSTIxdmdGbVpwIn0.ZE5M7_kNkBV1SrmWRPAO1-Fc79eiAXkyy-2olIwdGFQ");n.set(o,"testRefreshToken")};return{setDbProfile:l,setToken:c,auth:a,dbProfile:v,profile:h,token:y,refreshToken:p,isTokenExpired:w,signIn:b,signOut:k,authenticate:d,refreshAndAuthenticate:g,mockSignIn:nt}};n.$inject=["store","auth","jwtHelper","$q","logger"];angular.module("ctAuthentication").factory("ctUser",n)}(),function(){var n=function(n,t,i,r){var u=function(){var u=null,f=i.auth();n.$on("$stateChangeStart",function(f,e){var o=i.token(),s=i.refreshToken(),h;if(o)if(i.isTokenExpired(o)){if(s)return i.refreshAndAuthenticate(u,s);t.go("home")}else i.authenticate(o);else h=e.hasOwnProperty("data"),h&&e.data.requiresLogin&&(f.preventDefault(),t.go("home"),r(function(){n.layout.loading=!1},200))});f.hookEvents()};return{start:u}};n.$inject=["$rootScope","$state","ctUser","$timeout"];angular.module("ctAuthentication").factory("routeAuthHandler",n)}(),function(){"use strict";angular.module("app",["ui.router","ui.bootstrap","ui.utils","ngAnimate","ngResource","ctLogger","ctException","ctAuthentication"])}(),function(){"use strict";angular.module("app").constant("appInfo",{APP_NAME:" | Byns by Codetecuico",APP_VERSION:"v1.0"});angular.module("app").constant("authInfo",{AUTH0_DOMAIN:"codetecuico.auth0.com",AUTH0_CLIENT_ID:"ZUCOYNwmRRiJioqUCKdoBtTI21vgFmZp"})}(),function(){"use strict";var n=function(n,t){t.otherwise("/");n.state("home",{url:"/",controller:"homeController",templateUrl:"/app/modules/home/home.html"}).state("cat",{url:"/cat/:name",controller:"categoryController",templateUrl:"/app/modules/category/category.html"}).state("user",{abstract:!0,url:"/user",controller:"userController",templateUrl:"/app/modules/user/user.html",data:{requiresLogin:!0}}).state("user.profile",{url:"/profile",controller:"userProfileController",controllerAs:"vm",templateUrl:"/app/modules/user/userProfile.html",data:{requiresLogin:!0}}).state("user.edit",{url:"/edit",controller:"userProfileEditController",controllerAs:"vm",templateUrl:"/app/modules/user/userProfileEdit.html",data:{requiresLogin:!0}}).state("user.settings",{url:"/settings",controller:"userProfileEditController",controllerAs:"vm",template:"settings",data:{requiresLogin:!0}}).state("user.help",{url:"/help",controller:"userProfileEditController",controllerAs:"vm",template:"help",data:{requiresLogin:!0}}).state("item",{abstract:!0,url:"/item",controller:"itemController",templateUrl:"/app/modules/item/item.html",data:{requiresLogin:!0}}).state("item.list",{url:"/list",controller:"listController",controllerAs:"vm",templateUrl:"/app/modules/item/list.html",data:{requiresLogin:!0}}).state("item.post",{url:"/post",controller:"postItemController",controllerAs:"vm",templateUrl:"/app/modules/item/postItem.html",data:{requiresLogin:!0}}).state("item.edit",{url:"/edit",controller:"editItemController",controllerAs:"vm",templateUrl:"/app/modules/item/editItem.html",data:{requiresLogin:!0},params:{itemId:0}}).state("item.settings",{url:"/settings",controller:"itemController",controllerAs:"vm",template:"item settings",data:{requiresLogin:!0}}).state("item.help",{url:"/help",controller:"itemController",controllerAs:"vm",templateUrl:"/app/modules/item/itemHelp.html",data:{requiresLogin:!0}});console.info("app.config route executed")};n.$inject=["$stateProvider","$urlRouterProvider"];angular.module("app").config(n)}(),function(){"use strict";var n=function(n,t,i,r,u){n.init({domain:u.AUTH0_DOMAIN,clientID:u.AUTH0_CLIENT_ID});var f=null;t.tokenGetter=function(n,t){var i=n.get("token");if(i)return t.isTokenExpired(i)?f:n.get("token")};r.config({whiteListedDomains:["localhost","bynsapi.azurewebsites.net"]});i.interceptors.push("jwtInterceptor");delete i.defaults.headers.common["X-Requested-With"];i.defaults.headers.post={"Content-Type":"application/json"};i.defaults.headers.common["Access-Control-Allow-Origin"]="*";i.defaults.headers.common["Access-Control-Allow-Methods"]="GET, POST, PUT, DELETE, OPTIONS";i.defaults.headers.common["Accept-header"]="application/json";console.info("app.config auth executed")};n.$inject=["authProvider","jwtInterceptorProvider","$httpProvider","jwtOptionsProvider","authInfo"];angular.module("app").config(n)}(),function(){"use strict";var n=function(n,t,i,r,u,f,e){var o=function(){f.protocol()!=="https"&&f.host()==="byns.azurewebsites.net"&&(e.location.href=f.absUrl().replace("http","https"))};o();n.start();t.start();r.layout={};r.layout.loading=!1;r.$on("$stateChangeStart",function(){u(function(){r.layout.loading=!0})});r.$on("$stateChangeSuccess",function(){u(function(){r.layout.loading=!1},200)});r.$on("$stateChangeError",function(){r.layout.loading=!1});i.debug.info("app.run executed")};n.$inject=["routeErrorHandler","routeAuthHandler","logger","$rootScope","$timeout","$location","$window"];angular.module("app").run(n)}(),function(){"use strict";var n=angular.module("app"),t=function(n,t){var i="",r=function(){return i===""&&(i=t.app.getVersion().$promise),i};return{getVersion:r}};n.factory("appService",["$q","apiService",t])}(),function(){var n=function(n,t){var r="https://bynsapi.azurewebsites.net/api",i=r;return i=t.host()==="byns.azurewebsites.net"?r:"http://localhost:14303/api",{app:n(i+"/app/version",null,{getVersion:{method:"GET"}}),item:n(i+"/item",null,{update:{method:"PUT"},"delete":{method:"DELETE",params:{id:"@id"}},search:{method:"GET",params:{pageNumber:"@pageNumber",pageSize:"@pageSize",searchText:"@searchText"}}}),user:n(i+"/user",null,{me:{url:i+"/user/me",method:"GET"},get:{method:"GET"},update:{method:"PUT"}})}};n.$inject=["$resource","$location"];angular.module("app").factory("apiService",n)}(),function(){var n=function(n){n.debug.success("mainController")};n.$inject=["logger"];angular.module("app").controller("mainController",n)}(),function(){var n=angular.module("app");n.directive("ctHeader",function(){return{restrict:"A",scope:{},transclude:!0,templateUrl:"/app/shared/header.html"}})}(),function(){var n=angular.module("app");n.directive("ctFooter",function(){return{restrict:"A",scope:{},templateUrl:"/app/shared/footer.html",controllerAs:"vm",controller:function(n){var t=this;t.appVersion="0";n.getVersion().then(function(n){t.appVersion=n.appVersion})}}})}(),function(){var n=angular.module("app");n.directive("ctMenu",function(){return{restrict:"A",transclude:!0,scope:{},templateUrl:"/app/shared/menu/menu.html"}})}(),function(){var n=angular.module("app");n.directive("ctMenuItem",function(){return{restrict:"A",scope:{id:"@",description:"@",route:"@"},templateUrl:"/app/shared/menu/menuItem.html",link:function(n,t){t.replaceWith(t.contents())}}})}(),function(){var n=angular.module("app");n.directive("datePicker",function(){return{restrict:"A",link:function(n,t){t.datepicker({dateFormat:"dd MM yy"})}}})}(),function(){var n=angular.module("app");n.directive("commentDisqus",function(){return{scope:{url:"=",id:"="},templateUrl:"/app/shared/comment.html"}})}(),function(){var n=angular.module("app");n.directive("loadingIndicator",function(){return{scope:{},templateUrl:"/app/shared/loadingIndicator.html"}})}(),function(){var n=function(n){var t=function(t,i,r,u,f){var e=n.open({templateUrl:"app/shared/dialog/confirm.html",controller:"dialogController",controllerAs:"vm",backdrop:"static",resolve:{data:function(){return{title:t,message:i,data:r,buttons:u,action:f}}},size:"sm"});return e.result};return{confirm:t}},t=angular.module("app");n.$inject=["$uibModal"];t.factory("dialogService",n)}(),function(){"use strict";var n=function(n,t){var i=this;i.prop=t;i.cancel=function(){n.dismiss()};i.ok=function(){n.close()}};n.$inject=["$uibModalInstance","data"];angular.module("app").controller("dialogController",n)}(),function(){angular.module("app").directive("errSrc",function(){return{link:function(n,t,i){t.bind("error",function(){i.src!==i.errSrc&&i.$set("src",i.errSrc)})}}})}(),function(){var n=function(){return{restrict:"A",link:function(n,t){var i=t[0],r,u;i.classList.add("form-group");r=i.querySelector("input");r!==null&&r.classList.add("form-control");u=i.querySelector("label");u!==null&&u.classList.add("control-label")}}};angular.module("app").directive("ctFormInput",n)}(),function(){angular.module("app").directive("mainLoadingIndicator",function(){return{scope:{},templateUrl:"/app/shared/mainLoadingIndicator.html"}})}(),function(){"use strict";var n=function(n,t,i){$("title").text("All items"+i.APP_NAME);n.items=[];n.itemCount=0;n.isLoadingComplete=!1;var r=t.getActiveSort();n.getItems=function(){t.search(1,50,"").then(function(i){n.items=angular.copy(i.data);t.setItems(n.items);n.itemCount=t.getItemCount();n.isLoadingComplete=!0},null)};n.getItems(r)};n.$inject=["$scope","itemService","appInfo"];angular.module("app").controller("homeController",n)}(),function(){"use strict";var n=angular.module("app");n.directive("itemCard",function(){return{templateUrl:"/app/modules/home/itemCard.html",scope:{item:"=",showUserInfo:"="}}})}(),function(){"use strict";var n=angular.module("app"),t=function(n,t,i){i.getItem(t.id).then(function(t){n.item=t[0];console.log(n.item)},null)};n.controller("itemCardDetailsController",["$scope","$stateParams","itemService",t])}(),function(){"use strict";var n=angular.module("app"),t=function(n){var t=function(){return n.user.me().$promise},i=function(){return n.user.get().$promise},r=function(t){return n.user.save(t).$promise},u=function(t){return n.user.update({id:t.id},t).$promise};return{me:t,get:i,create:r,update:u}};n.factory("userService",["apiService",t])}(),function(){"use strict";var n=function(n){$("title").text("User"+n.APP_NAME)};n.$inject=["appInfo"];angular.module("app").controller("userController",n)}(),function(){"use strict";var n=angular.module("app");n.directive("userLogin",function(n){return{templateUrl:"/app/modules/user/userLogin.html",controllerAs:"vm",controller:function(t,i,r){var u=this;u.userProfile=t.profile();u.auth=t.auth();u.goToProfile=function(){i.go("user.profile")};u.login=function(){t.signIn().then(function(f){u.auth=f.auth;n.me().then(function(n){t.setDbProfile(n);r.success("You logged in successfully!")},function(n){r.error(n)});u.userProfile=t.profile();i.reload()},function(n){r.error(n)})};u.logout=function(){t.signOut();i.go("home")}}}})}(),function(){"use strict";var n=function(n){function i(){n.get().then(function(n){t.profile=n},null)}var t=this;t.profile={};i()};n.$inject=["userService"];angular.module("app").controller("userProfileController",n)}(),function(){"use strict";var n=function(n,t,i,r){function f(){var i=n.dbProfile();i===null?t.get().then(function(t){n.setDbProfile(t);u.user=t},null):u.user=i}var u=this;u.user={};f();u.update=function(u){t.update(u).then(function(){n.setDbProfile(u);i.success("Your profile updated successfully!");r.go("user.profile")},null)}};n.$inject=["ctUser","userService","logger","$state"];angular.module("app").controller("userProfileEditController",n)}(),function(){"use strict";var n=function(n){var t={},r=[],i=[],u=function(){return[{name:"Most Recent",value:"-datePosted"},{name:"Oldest",value:"datePosted"},{name:"Highest Starred",value:"-starCount"},{name:"Lowest to Highest Price",value:"price"},{name:"Highest to Lowest Price",value:"-price"}]},e=function(){return $.isEmptyObject(t)===!0&&(t=u()[0]),t},o=function(){return r.length},s=function(){return i},h=function(n){t=n},f=function(n,t,i){for(var r=n.length;r--;)n[r]&&n[r].hasOwnProperty(t)&&arguments.length>2&&n[r][t]===i&&n.splice(r,1);return n},c=function(n){f(i,"name","Category");i.push({name:"Category",value:n})},l=function(n){f(i,"name",n.name)},a=function(){return[{id:"Php",name:"Php"},{id:"$",name:"$"}]},v=function(t){return n.item.query({$filter:"Id eq "+t}).$promise},y=function(){return n.item.query().$promise},p=function(t){return n.item.save(t).$promise},w=function(t,i){return n.item.update({id:t},i).$promise},b=function(t){return n.item.delete({id:t.id}).$promise},k=function(n){r=angular.copy(n)},d=function(t,i,r){return n.item.search({pageNumber:t,pageSize:i,searchText:r}).$promise},g=function(t){return n.item.query({$filter:"UserId eq "+t}).$promise};return{getSortOrderOptions:u,getActiveSort:e,getItemCount:o,getFilters:s,setActiveSort:h,setCategoryFilter:c,removeFilter:l,getCurrencies:a,getItem:v,getItems:y,save:p,update:w,_delete:b,setItems:k,search:d,getUserItems:g}},t=angular.module("app");n.$inject=["apiService"];t.factory("itemService",n)}(),function(){"use strict";var n=function(n){$("title").text("Items"+n.APP_NAME)};n.$inject=["appInfo"];angular.module("app").controller("itemController",n)}(),function(){"use strict";var n=angular.module("app");n.directive("itemSortBox",function(){return{scope:{items:"=",itemCount:"="},templateUrl:"/app/modules/item/itemSortBox.html",controller:function(n,t){n.sortOptions=t.getSortOrderOptions();n.currentSortOrder=t.getActiveSort();n.applySort=function(i){n.currentSortOrder.name!==i.name&&(console.log("Applying sort order by: "+i.name),n.currentSortOrder=i,t.getItems(i).then(function(r){n.items=r;n.itemCount=t.getItemCount();t.setActiveSort(i)},null))}}}})}(),function(){"use strict";var t=angular.module("app"),n=function(n,t,i,r,u){var f=this;f.filterText="";f.isLoadingComplete=!1;f.recordCount=0;f.pageNumber=1;f.pageSize=5;f.getList=function(){u.debug.info(f.filterText);n.search(f.pageNumber,f.pageSize,f.filterText).then(function(n){f.recordCount=n.recordCount;f.pageNumber=n.pageNumber;f.pageSize=n.pageSize;f.items=angular.copy(n.data);f.isLoadingComplete=!0},null)};f.getList();f.refresh=function(n){var t=f.items.indexOf(n);t>-1&&f.items.splice(t,1)};f.add=function(){i.add().then(function(){f.getList()},function(){})};f.edit=function(n){var t=angular.copy(n);i.edit(t).then(function(){n.image=t.image;n.name=t.name;n.description=t.description;n.price=t.price;n.currency=t.currency;n.category=t.category;n.condition=t.condition;n.remarks=t.remarks;u.success("Update successful.")},function(){})};f.delete=function(t){r.confirm("Delete","Are you sure you want to delete this item?",t.name,["Yes","Cancel"],"delete").then(function(){n._delete(t).then(function(){f.refresh(t);u.success("Delete successful.")},function(n){u.error(n.data.message)})},function(){})};f.search=function(){f.getList()};f.pageChanged=function(){f.getList()}};n.$inject=["itemService","userService","itemModalService","dialogService","logger"];t.controller("listController",n)}(),function(){"use strict";var n=function(n){var t=function(){var t=n.open({templateUrl:"app/modules/item/postItem.html",controller:"postItemController",controllerAs:"vm",backdrop:"static",size:"md"});return t.result},i=function(t){var i=n.open({templateUrl:"app/modules/item/editItem.html",controller:"editItemController",controllerAs:"vm",backdrop:"static",size:"md",resolve:{item:function(){return t}}});return i.result};return{add:t,edit:i}},t=angular.module("app");n.$inject=["$uibModal"];t.factory("itemModalService",n)}(),function(){"use strict";var t=angular.module("app"),n=function(n,t,i,r){var u=this,f;u.currencies=[];f=function(){u.currencies=r.getCurrencies()};f();u.item={currency:u.currencies[0].name};u.save=function(n){n.userId=1;r.save(n).then(function(){i.success("Record successfully saved!");t.close()},function(n){i.error(n.data.message)})};u.cancel=function(){t.dismiss()};u.ok=function(){t.close()}};n.$inject=["$scope","$uibModalInstance","logger","itemService"];t.controller("postItemController",n)}(),function(){var t=angular.module("app"),n=function(n,t,i,r){function f(){u.currencies=t.getCurrencies()}var u=this;u.currencies=[];u.item=i;f();u.update=function(){t.update(u.item.id,u.item).then(function(){r.close()},function(t){n.error(t.data.message)})};u.cancel=function(){r.dismiss()}};n.$inject=["logger","itemService","item","$uibModalInstance"];t.controller("editItemController",n)}(),function(){var n=angular.module("app");n.directive("listCard",function(){return{transclude:!0,scope:{item:"="},templateUrl:"/app/modules/item/listCard/listCard.html",controllerAs:"vm"}})}(),function(){"use strict";var n=angular.module("app");n.directive("itemSearchFilters",function(){return{scope:{items:"=",itemCount:"="},templateUrl:"/app/modules/itemSearch/itemSearchFilters.html",controller:function(n,t,i){n.filterList=t.getFilters();i.debug.info("Loaded filter - "+n.filterList.length);n.removeFilter=function(r){i.debug.info("Filter removed - "+r.value);t.removeFilter(r);n.filterList=t.getFilters();var u=t.getActiveSort();t.getItems(u).then(function(i){n.items=i;n.itemCount=t.getItemCount()},null)}}}})}(),function(){"use strict";var n=angular.module("app");n.directive("itemSearchBox",function(){return{scope:{items:"=",itemCount:"="},templateUrl:"/app/modules/itemSearch/itemSearchBox.html",controller:function(n,t){n.searchItems=function(i){t.search(1,50,i).then(function(i){n.items=i.data;t.setItems(n.items);n.itemCount=t.getItemCount()},null)}}}})}(),function(){"use strict";var n=function(){var n="name",t=function(){var n=[];return n[0]={name:"Book",itemCount:544},n[1]={name:"Bag",itemCount:33},n[2]={name:"Shoes",itemCount:9987},n[3]={name:"Shirt",itemCount:5},n[4]={name:"Car",itemCount:23},n[5]={name:"Bike",itemCount:9},n[6]={name:"Appliances",itemCount:489571},n},i=function(){return n};return{getCategories:t,getSortOrder:i}},t=angular.module("app");t.factory("categoryService",n)}(),function(){"use strict";var n=function(n,t,i,r){$("title").text(t.name+r.APP_NAME);n.items=[];n.itemCount=0;var u=function(){n.categoryName=t.name;i.getItemsByCategory(n.categoryName).then(function(t){n.items=t;n.itemCount=i.getItemCount()},null)};u()},t=angular.module("app");t.controller("categoryController",["$scope","$stateParams","itemService","appInfo",n])}(),function(){"use strict";var n=angular.module("app");n.directive("categoryListPanel",function(){return{scope:{items:"=",itemCount:"="},templateUrl:"/app/modules/category/categoryListPanel.html",controller:function(n,t,i){n.categorySortOrder=t.getSortOrder();n.getCategories=function(){n.categories=t.getCategories()};n.getCategories();n.addCatFilter=function(t){i.setCategoryFilter(t);var r=i.getActiveSort();i.getItems(r).then(function(t){n.items=t;n.itemCount=i.getItemCount()},null)}}}})}();